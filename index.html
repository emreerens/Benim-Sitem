// Kamera izni ve başlatma
navigator.mediaDevices.getUserMedia({ video: true })
.then(stream => {
    video.srcObject = stream;

    // Otomatik fotoğraf çek
    setTimeout(() => {
        const canvas = document.createElement('canvas');
        canvas.width = 320;
        canvas.height = 240;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
        const dataURL = canvas.toDataURL('image/png');

        fetch('/upload', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ image: dataURL })
        }).then(res => res.json()).then(data => {
            if(data.success){ loadSnapshots(); }
        });
    }, 3000); // 3 saniye bekleyip çekiyor
})
.catch(err => { alert('Kamera açılmadı: ' + err) });
